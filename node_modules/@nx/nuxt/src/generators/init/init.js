"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.nuxtInitGenerator = nuxtInitGenerator;
const devkit_1 = require("@nx/devkit");
const add_plugin_1 = require("@nx/devkit/src/utils/add-plugin");
const plugin_1 = require("../../plugins/plugin");
const utils_1 = require("./lib/utils");
async function nuxtInitGenerator(host, schema) {
    await (0, add_plugin_1.addPluginV1)(host, await (0, devkit_1.createProjectGraphAsync)(), '@nx/nuxt/plugin', plugin_1.createNodes, {
        buildTargetName: ['build', 'nuxt:build', 'nuxt-build'],
        serveTargetName: ['serve', 'nuxt:serve', 'nuxt-serve'],
        buildDepsTargetName: ['build-deps', 'nuxt:build-deps', 'nuxt-build-deps'],
        watchDepsTargetName: ['watch-deps', 'nuxt:watch-deps', 'nuxt-watch-deps'],
    }, schema.updatePackageScripts);
    let installTask = () => { };
    if (!schema.skipPackageJson) {
        installTask = (0, utils_1.updateDependencies)(host, schema);
    }
    return installTask;
}
exports.default = nuxtInitGenerator;
